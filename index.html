<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="manifest" href="manifest.json">

    <!-- SEO META TAGS -->
    <title>Free 200KB PDF Compressor | Compress PDF & Images Online | V.K Tools</title>

    <meta name="description" content="Free online 200KB PDF compressor. Instantly reduce PDF and image file sizes to under 200KB with high quality. Fast, secure, no ads, no signup. Best for exams, job forms, online submissions.">

    <meta name="keywords" content="200kb pdf compressor, pdf size reducer, compress pdf online, reduce pdf size, image compressor, jpg compressor, compress pdf to 200kb, online pdf tool, shrink pdf size, free pdf compressor">

    <meta name="robots" content="index, follow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="canonical" href="https://devil9594.github.io/vk-compressor/">

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="Free 200KB PDF Compressor | Fast Online File Compressor">
    <meta property="og:description" content="Compress PDF and images to 200KB instantly. High quality, secure, and mobile-friendly.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://devil9594.github.io/vk-compressor/">
    <meta property="og:image" content="https://devil9594.github.io/vk-compressor/preview.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free 200KB PDF Compressor | Online PDF & Image Size Reducer">
    <meta name="twitter:description" content="Compress PDF or image below 200KB for free. High quality, secure, no ads.">
    <meta name="twitter:image" content="https://devil9594.github.io/vk-compressor/preview.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc =
            "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js";
    </script>

    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background: radial-gradient(circle at top left, #1e1b4b, #312e81, #0f172a);
            background-size: 200% 200%;
            animation: gradientBG 15s ease infinite;
            color: white;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .vk-logo {
            font-size: 2.7rem;
            font-weight: 900;
            background: linear-gradient(135deg, #818cf8, #c084fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -1px;
        }

        .drop-zone {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            background: rgba(0, 0, 0, 0.2);
        }
        .drop-zone:hover, .drop-zone.dragover {
            border-color: #818cf8;
            background: rgba(129, 140, 248, 0.1);
            transform: scale(1.02);
        }

        .progress-container {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 999px;
            height: 6px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #818cf8, #c084fc);
            width: 0%;
            transition: width 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -8px rgba(124, 58, 237, 0.5);
        }
    </style>
</head>

<body class="min-h-screen flex items-center justify-center p-4">

<div class="glass-panel w-full max-w-lg rounded-3xl p-8 relative">

    <div class="text-center mb-8">
        <span class="vk-logo">V.K</span>
        <p class="text-gray-400 text-sm tracking-wide mt-1">Professional Compression Engine</p>
    </div>

    <!-- Upload -->
    <div id="uploadSection">
        <label for="fileInput" id="dropZone"
               class="drop-zone block w-full rounded-2xl p-10 text-center cursor-pointer">
            <svg class="w-16 h-16 mx-auto text-indigo-300 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                      d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
            </svg>
            <span class="text-xl">Upload File</span>
            <p class="text-xs text-gray-400 mt-1">PDF, JPG, PNG</p>
        </label>
        <input id="fileInput" type="file" accept=".pdf, image/*" class="hidden">
    </div>

    <!-- Processing -->
    <div id="processingSection" class="hidden py-8 text-center">
        <div class="w-16 h-16 border-4 border-indigo-500/30 border-t-indigo-500 rounded-full animate-spin mx-auto"></div>
        <h3 class="text-xl font-bold mt-4">Optimizing…</h3>
        <p id="statusText" class="text-gray-400 text-sm">Analyzing...</p>

        <div class="progress-container mt-4">
            <div id="progressBar" class="progress-bar"></div>
        </div>
    </div>

    <!-- Result -->
    <div id="resultSection" class="hidden">
        <div class="bg-white/5 p-6 rounded-xl border border-white/10 mb-4">
            <div class="flex justify-between">
                <div>
                    <p class="text-gray-400 text-xs">Original</p>
                    <p id="originalSize" class="text-lg font-bold">0 MB</p>
                </div>

                <div class="text-indigo-300">→</div>

                <div>
                    <p class="text-indigo-300 text-xs">Optimized</p>
                    <p id="finalSize" class="text-lg font-bold text-green-400">0 KB</p>
                </div>
            </div>
        </div>

        <button id="downloadBtn"
                class="w-full btn-primary py-4 rounded-xl font-bold">Download File</button>

        <button onclick="location.reload()"
                class="w-full mt-3 text-gray-400 text-sm">Compress Another</button>
    </div>

    <!-- FOOTER -->
    <footer style="text-align:center; margin-top:40px; font-size:14px; opacity:0.7;">
        <a href="privacy-policy.html" style="margin-right:20px; color:white;">Privacy Policy</a>
        <a href="terms.html" style="margin-right:20px; color:white;">Terms</a>
        <a href="contact.html" style="color:white;">Contact</a>
    </footer>

</div>

<script>
    const fileInput = document.getElementById("fileInput");
    const dropZone = document.getElementById("dropZone");
    const uploadSection = document.getElementById("uploadSection");
    const processingSection = document.getElementById("processingSection");
    const resultSection = document.getElementById("resultSection");
    const statusText = document.getElementById("statusText");
    const progressBar = document.getElementById("progressBar");
    const downloadBtn = document.getElementById("downloadBtn");

    let finalBlob = null;
    let finalFileName = "optimized";

    fileInput.addEventListener("change", e => handleFile(e.target.files[0]));

    dropZone.addEventListener("dragover", e => {
        e.preventDefault();
        dropZone.classList.add("dragover");
    });

    dropZone.addEventListener("dragleave", () => dropZone.classList.remove("dragover"));

    dropZone.addEventListener("drop", e => {
        e.preventDefault();
        dropZone.classList.remove("dragover");
        handleFile(e.dataTransfer.files[0]);
    });

    downloadBtn.addEventListener("click", () => {
        if (!finalBlob) return;
        const url = URL.createObjectURL(finalBlob);
        const a = document.createElement("a");
        a.href = url;
        a.download = finalFileName;
        document.body.appendChild(a);
        a.click();
        a.remove();
        setTimeout(() => URL.revokeObjectURL(url), 2000);
    });

    function handleFile(file) {
        if (!file) return;

        uploadSection.classList.add("hidden");
        processingSection.classList.remove("hidden");
        document.getElementById("originalSize").textContent = formatBytes(file.size);

        const ext = file.name.split(".").pop().toLowerCase();
        const base = file.name.replace(/\.[^/.]+$/, "");

        if (ext === "pdf") {
            finalFileName = base + "_optimized.pdf";
            processPdf(file);
        } else {
            finalFileName = base + "_optimized.jpg";
            processImage(file);
        }
    }

    async function processPdf(file) {
        statusText.textContent = "Rendering pages…";
        progressBar.style.width = "15%";

        const arrayBuffer = await file.arrayBuffer();
        const pdfDoc = await pdfjsLib.getDocument(arrayBuffer).promise;

        const { jsPDF } = window.jspdf;
        const newPdf = new jsPDF();

        for (let i = 1; i <= pdfDoc.numPages; i++) {
            const percent = (i / pdfDoc.numPages) * 80 + 15;
            progressBar.style.width = percent + "%";

            const page = await pdfDoc.getPage(i);
            const viewport = page.getViewport({ scale: 1.4 });

            const canvas = document.createElement("canvas");
            canvas.width = viewport.width;
            canvas.height = viewport.height;
            const ctx = canvas.getContext("2d");

            await page.render({ canvasContext: ctx, viewport }).promise;

            const imgData = canvas.toDataURL("image/jpeg", 0.45);

            if (i > 1) newPdf.addPage();
            const pdfW = newPdf.internal.pageSize.getWidth();
            const pdfH = (viewport.height * pdfW) / viewport.width;

            newPdf.addImage(imgData, "JPEG", 0, 0, pdfW, pdfH);
        }

        finalBlob = newPdf.output("blob");
        showResult(finalBlob);
    }

    function processImage(file) {
        progressBar.style.width = "20%";
        statusText.textContent = "Processing image…";

        const reader = new FileReader();
        reader.onload = e => {
            const img = new Image();
            img.onload = () => {
                let width = img.width;
                let height = img.height;

                const maxWidth = 1024;
                if (width > maxWidth) {
                    height *= maxWidth / width;
                    width = maxWidth;
                }

                const canvas = document.createElement("canvas");
                canvas.width = width;
                canvas.height = height;
                const ctx = canvas.getContext("2d");

                ctx.imageSmoothingEnabled = true;
                ctx.imageSmoothingQuality = "high";
                ctx.drawImage(img, 0, 0, width, height);

                progressBar.style.width = "80%";

                canvas.toBlob(blob => {
                    finalBlob = blob;
                    showResult(blob);
                }, "image/jpeg", 0.5);
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }

    function showResult(blob) {
        setTimeout(() => {
            processingSection.classList.add("hidden");
            resultSection.classList.remove("hidden");
            document.getElementById("finalSize").textContent = formatBytes(blob.size);
        }, 600);
    }

    function formatBytes(bytes) {
        const sizes = ["Bytes", "KB", "MB"];
        if (bytes === 0) return "0 Bytes";
        const i = Math.floor(Math.log(bytes) / Math.log(1024));
        return (bytes / Math.pow(1024, i)).toFixed(2) + " " + sizes[i];
    }
</script>

</body>
</html>

